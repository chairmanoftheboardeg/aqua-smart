<!doctype html>
<html lang="en">
<head>
<title>Careers | AquaSmart</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#07121a">
<link rel="icon" href="https://i.ibb.co/wNLN6dtm/Logo-1.png">
<link rel="preconnect" href="https://hhqriuezzjlrhmwifxva.supabase.co">
<link rel="stylesheet" href="/assets/css/styles.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/assets/js/config.js"></script>
<script defer src="/assets/js/app.js"></script>

</head>
<body>
<div id="siteHeader"></div>
<main><section class="section"><div class="container"><div class="badge">Careers</div><h1 style="margin-top:12px;">Open positions</h1>
<p>Apply with a CV/Resume link (no uploads). Your application appears in the Admin dashboard.</p>
<div class="card pad" style="margin-top:16px;"><h2>How to get a CV link</h2>
<p class="muted">Upload your CV to Google Drive or Dropbox, set it to “Anyone with the link can view”, then paste the share link.</p>
<div class="pills"><span class="pill">Google Drive: Share → General access → Anyone with the link</span><span class="pill">Dropbox: Share → Create link</span></div></div>
<div class="card pad" style="margin-top:16px;"><h2>Jobs</h2><div id="jobsList" class="grid two" style="margin-top:12px;"></div><div id="jobsMsg" class="muted" style="margin-top:10px;"></div></div>
</div></section>
<script>
document.addEventListener("DOMContentLoaded", async ()=> {
  const wrap=document.getElementById("jobsList");
  const msg=document.getElementById("jobsMsg");
  msg.textContent="Loading…";
  try{
    const jobs=await window.AquaSmartAPI.fetchActiveJobs();
    if(!jobs.length){ msg.textContent="No open positions at the moment."; return; }
    msg.textContent="";
    wrap.innerHTML = jobs.map(j=>`
      <div class="card pad">
        <h3>${eh(j.title||"")}</h3>
        <p class="muted">${eh(j.location||"")} • ${eh(j.employment_type||"")}</p>
        <p>${eh((j.description||"").slice(0,180))}${(j.description||"").length>180 ? "…" : ""}</p>
        <a class="btn full" href="/careers/apply/?job_id=${j.id}">Apply</a>
      </div>`).join("");
  }catch(_){ msg.textContent="Failed to load jobs. Please try again."; }
  function eh(s){ return String(s||"").replace(/[&<>"]/g,c=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;" }[c]));}
});
</script></main>
<div id="siteFooter"></div>
</body>
</html>
